#
# Chef Client Config File
#
# Dynamically generated by Chef - local modifications will be replaced
#

# FIXME set @node[:chef][:server_fqdn] from some heroku / rack value

<% http_basic_auth = ENV['APP_ACCESS_TOKEN'] ? "#{ENV['APP_ACCESS_TOKEN']}:X@" : '' %>

log_level          :info
log_location       <%= @client_log %>
ssl_verify_mode    :verify_none
registration_url   "https://<%= http_basic_auth %><%= @node[:chef][:server_fqdn] %>"
openid_url         "<%= Chef::Config.openid_url %>"
template_url       "https://<%= http_basic_auth %><%= @node[:chef][:server_fqdn] %>"
remotefile_url     "https://<%= http_basic_auth %><%= @node[:chef][:server_fqdn] %>"
search_url         "https://<%= http_basic_auth %><%= @node[:chef][:server_fqdn] %>"
role_url           "https://<%= http_basic_auth %><%= @node[:chef][:server_fqdn] %>"

file_store_path    "<%= @node[:chef][:path] %>/file_store"
file_cache_path    "<%= @node[:chef][:path] %>/cache"

pid_file           "<%= @node[:chef][:run_path] %>/chef-client.pid"

Chef::Log::Formatter.show_time = <%= @show_time %>
